## Деплой проекта на удаленном сервере при помощи Ansible

Перед тем, как разворачивать проект, необходимо задать системные переменные: `APP_TAG_VERSION` - версия проекта, скачиваемая с гитхаба, и `DEST_FOLDER` - папка на гостевой машине, в которую будет произведена распаковка архива. Можно установить вручную, можно через файл `config.env`.

Установка нужных системных переменных через файл `condig.env`
```bash
set -a
source config.env
set +a
```

## Хосты
Для запуска системы нужно создать файл `hosts.yml`, копирующий содержимое `hosts_example.yml`, но с подставленными значениями хоста, порта, пользователя на сервере и его пароля.

## Плейбуки и их задачи
Запуск:
```bash
ansible-playbook -i hosts.yml <PLAYBOOK-FILENAME> -kK -v
```

1. `test-connection.yml`: проверка подключения к серверу и попытка чтения системной переменной тега.

2. `deploy-booker-from-scratch.yml`: первое подключение к удаленному хосту: обновление пакетов, установка докера, скачивание исходного кода и его деплой через docker-compose.

3. `stop-deploy.yml`: остановка запущенных ранее контейнеров

4. `run-deploy.yml`: запуск контейнеров после остановки(при ранее установленном docker и скачанном коде).
